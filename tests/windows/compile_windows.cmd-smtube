@echo off

set DEFS=

if "%1" == "" (

	set DEFS=
	goto compileSMTube

) else if "%1" == "32pe" (

	set DEFS="DEFINES+=PORTABLE_APP"
	goto compileSMTube

) else if "%1" == "64" (

	set DEFS="DEFINES+=SMP_WIN64"
	goto compileSMTube

) else if "%1" == "64pe" (

	set DEFS="DEFINES+=SMP_WIN64 PORTABLE_APP"
	goto compileSMTube

) else (

	echo How to use:
	echo.
	echo compile_windows.cmd [buildtype]
	echo.
	echo 32:	SMTube 32-bit [Default]
	echo 32pe:	SMTube 32-bit ^(Portable^)
	echo 64: 	SMTube 64-bit
	echo 64pe:	SMTube 64-bit ^(Portable^)
	echo.
	goto end:

)

:compileSMTube

call getrev.cmd

cd src
lrelease smtube.pro
qmake %DEFS%
mingw32-make

:end